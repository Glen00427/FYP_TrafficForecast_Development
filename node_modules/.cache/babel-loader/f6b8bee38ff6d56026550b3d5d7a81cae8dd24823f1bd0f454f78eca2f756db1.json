{"ast":null,"code":"// components/logout.js (or wherever yours lives)\nimport React,{useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";let supabase=null;try{supabase=require(\"../lib/supabaseClient\").supabase;}catch(_){}export async function doLogout(){try{var _supabase,_supabase$auth;if((_supabase=supabase)!==null&&_supabase!==void 0&&(_supabase$auth=_supabase.auth)!==null&&_supabase$auth!==void 0&&_supabase$auth.signOut){await supabase.auth.signOut();}}catch(_){}try{localStorage.removeItem(\"role\");}catch(_){}}export default function LogoutButton(_ref){let{onLoggedOut,label=\"Log out\",className=\"\"}=_ref;const[loading,setLoading]=useState(false);async function handleLogout(){setLoading(true);try{await doLogout();onLoggedOut===null||onLoggedOut===void 0?void 0:onLoggedOut();}finally{setLoading(false);}}return/*#__PURE__*/_jsx(\"button\",{onClick:handleLogout,disabled:loading,title:\"Log out\",className:className,children:loading?\"Logging out...\":label});}","map":{"version":3,"names":["React","useState","jsx","_jsx","supabase","require","_","doLogout","_supabase","_supabase$auth","auth","signOut","localStorage","removeItem","LogoutButton","_ref","onLoggedOut","label","className","loading","setLoading","handleLogout","onClick","disabled","title","children"],"sources":["/workspaces/FYP_TrafficForecast/src/components/logout.js"],"sourcesContent":["// components/logout.js (or wherever yours lives)\nimport React, { useState } from \"react\";\n\nlet supabase = null;\ntry {\n  supabase = require(\"../lib/supabaseClient\").supabase;\n} catch (_) {}\n\nexport async function doLogout() {\n  try {\n    if (supabase?.auth?.signOut) {\n      await supabase.auth.signOut();\n    }\n  } catch (_) {}\n  try {\n    localStorage.removeItem(\"role\");\n  } catch (_) {}\n}\n\nexport default function LogoutButton({\n  onLoggedOut,\n  label = \"Log out\",\n  className = \"\",\n}) {\n  const [loading, setLoading] = useState(false);\n\n  async function handleLogout() {\n    setLoading(true);\n    try {\n      await doLogout();\n      onLoggedOut?.();\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  return (\n    <button\n      onClick={handleLogout}\n      disabled={loading}\n      title=\"Log out\"\n      className={className}\n    >\n      {loading ? \"Logging out...\" : label}\n    </button>\n  );\n}\n"],"mappings":"AAAA;AACA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAExC,GAAI,CAAAC,QAAQ,CAAG,IAAI,CACnB,GAAI,CACFA,QAAQ,CAAGC,OAAO,CAAC,uBAAuB,CAAC,CAACD,QAAQ,CACtD,CAAE,MAAOE,CAAC,CAAE,CAAC,CAEb,MAAO,eAAe,CAAAC,QAAQA,CAAA,CAAG,CAC/B,GAAI,KAAAC,SAAA,CAAAC,cAAA,CACF,IAAAD,SAAA,CAAIJ,QAAQ,UAAAI,SAAA,YAAAC,cAAA,CAARD,SAAA,CAAUE,IAAI,UAAAD,cAAA,WAAdA,cAAA,CAAgBE,OAAO,CAAE,CAC3B,KAAM,CAAAP,QAAQ,CAACM,IAAI,CAACC,OAAO,CAAC,CAAC,CAC/B,CACF,CAAE,MAAOL,CAAC,CAAE,CAAC,CACb,GAAI,CACFM,YAAY,CAACC,UAAU,CAAC,MAAM,CAAC,CACjC,CAAE,MAAOP,CAAC,CAAE,CAAC,CACf,CAEA,cAAe,SAAS,CAAAQ,YAAYA,CAAAC,IAAA,CAIjC,IAJkC,CACnCC,WAAW,CACXC,KAAK,CAAG,SAAS,CACjBC,SAAS,CAAG,EACd,CAAC,CAAAH,IAAA,CACC,KAAM,CAACI,OAAO,CAAEC,UAAU,CAAC,CAAGnB,QAAQ,CAAC,KAAK,CAAC,CAE7C,cAAe,CAAAoB,YAAYA,CAAA,CAAG,CAC5BD,UAAU,CAAC,IAAI,CAAC,CAChB,GAAI,CACF,KAAM,CAAAb,QAAQ,CAAC,CAAC,CAChBS,WAAW,SAAXA,WAAW,iBAAXA,WAAW,CAAG,CAAC,CACjB,CAAC,OAAS,CACRI,UAAU,CAAC,KAAK,CAAC,CACnB,CACF,CAEA,mBACEjB,IAAA,WACEmB,OAAO,CAAED,YAAa,CACtBE,QAAQ,CAAEJ,OAAQ,CAClBK,KAAK,CAAC,SAAS,CACfN,SAAS,CAAEA,SAAU,CAAAO,QAAA,CAEpBN,OAAO,CAAG,gBAAgB,CAAGF,KAAK,CAC7B,CAAC,CAEb","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}